/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source, visit the plugin's github repository
*/

'use strict';

var state = require('@codemirror/state');
var obsidian = require('obsidian');
var view = require('@codemirror/view');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise */


function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const TOKEN_NAMES = {
    sceneHeading: "scene-heading",
    formattingSceneHeading: "formatting-scene-heading",
    action: "action",
    character: "character",
    dialogue: "dialogue",
    parenthetical: "parenthetical",
    lyrics: "lyrics",
    centered: "centered",
    transition: "transition",
    section: "section",
    synopsis: "synopsis",
    boneyard: "boneyard",
    fBoneyardStart: "formatting-boneyard-start",
    fBoneyardEnd: "formatting-boneyard-end",
    pageBreak: "page-break",
};
const n = TOKEN_NAMES;
const LINE_TOKENS = [
    {
        id: n.sceneHeading,
        regex: /^((?:\*{0,3}_?)?(?:(?:int|ext|est|i\/e|int\/ext)[. ]).+)|^(?:\.(?!\.+))(.+)/i,
    },
    {
        id: n.action,
        regex: /^!.*$/,
    },
    {
        id: n.character,
        regex: /^[^\S\r\n]*(?=.*[A-Z\u00C0-\u00DEF])[A-Z0-9\u00C0-\u00DEF \t'.-]+\s?(\(.*\))?$|@.*$/,
    },
    {
        id: n.dialogue,
        regex: /^[^\S\r\n]*(\^?)?(?:\n(?!\n+))([\s\S]+)/,
    },
    {
        id: n.parenthetical,
        regex: /^[^\S\r\n]*(\(.+\))$/,
    },
    {
        id: n.lyrics,
        regex: /^~.*$/,
    },
    {
        id: n.centered,
        regex: /^[^\S\r\n]*>[^<>]+<$/,
    },
    {
        id: n.transition,
        regex: /^[^\S\r\n]*(>[^<\n\r]*|[A-Z ]+ TO:)$/,
    },
    {
        id: n.section,
        regex: /^(#+)(?: *)(.*)/,
    },
    {
        id: n.synopsis,
        regex: /^(?:=(?!=+) *)(.*)$/,
    },
    // note: /^(?:\[{2}(?!\[+))(.+)(?:\]{2}(?!\[+))$/,
    // note_inline: /(?:\[{2}(?!\[+))([\s\S]+?)(?:\]{2}(?!\[+))/g,
    // boneyard: /(^\/\*|^\*\/)$/g,
    {
        id: n.fBoneyardStart,
        regex: /(^\/\*$)/g,
    },
    {
        id: n.fBoneyardEnd,
        regex: /(^\*\/$)/g,
    },
    {
        id: n.pageBreak,
        regex: /^={3,}$/,
    },
];

function composeFClass(t) {
    return `cm-formatting cm-fountain-formatting-${t}`;
}
function getLineFormat(line, state, ctx) {
    if (!line.trim()) {
        // at least two spaces to be considered
        // https://fountain.io/syntax#line-breaks
        if (line.length < 2)
            state.inDialogue = false;
        return null;
    }
    for (const { id: tId, regex: tRegex } of LINE_TOKENS) {
        if (tRegex.test(line)) {
            if (tId === TOKEN_NAMES.fBoneyardEnd) {
                state.inBoneyard = false;
            }
            if (state.inBoneyard) {
                return TOKEN_NAMES.boneyard;
            }
            if (tId === TOKEN_NAMES.fBoneyardStart) {
                state.inDialogue = false;
                state.inBoneyard = true;
            }
            if (tId === TOKEN_NAMES.character) {
                if (ctx.afterEmptyLine && !ctx.beforeEmptyLine && !ctx.isLastLine) {
                    state.inDialogue = true;
                }
                else {
                    break;
                }
            }
            if (tId === TOKEN_NAMES.parenthetical) {
                if (!state.inDialogue)
                    break;
            }
            if (tId === TOKEN_NAMES.transition) {
                if (!(ctx.afterEmptyLine && ctx.beforeEmptyLine))
                    break;
            }
            return tId;
        }
    }
    if (state.inDialogue) {
        return TOKEN_NAMES.dialogue;
    }
    if (state.inBoneyard) {
        return TOKEN_NAMES.boneyard;
    }
    return TOKEN_NAMES.action;
}
function buildDecorations(view$1) {
    const builder = new state.RangeSetBuilder();
    if (!isFountainEnabled(view$1))
        return builder.finish();
    function markDeco(start, end, className) {
        const deco = view.Decoration.mark({ class: className });
        builder.add(start, end, deco);
    }
    const state$1 = {
        inDialogue: false,
        inBoneyard: false,
    };
    for (const { from, to } of view$1.visibleRanges) {
        const visibleText = view$1.state.sliceDoc(from, to);
        const maxLines = view$1.state.doc.lines;
        for (let pos = from; pos <= to;) {
            const line = view$1.state.doc.lineAt(pos);
            const { from: lFrom, to: lTo, text: lText } = line;
            const relFrom = lFrom - from;
            const relTo = lTo - from;
            const ctx = {
                afterEmptyLine: visibleText[relFrom - 2] === "\n",
                beforeEmptyLine: visibleText[relTo + 1] === "\n",
                isLastLine: line.number === maxLines,
            };
            const token = getLineFormat(lText, state$1, ctx);
            if (!token) {
                pos = lTo + 1;
                continue;
            }
            const deco = view.Decoration.line({ class: "cm-fountain-" + token });
            builder.add(lFrom, lFrom, deco);
            // Mark Decorations
            const firstChar = lText[0];
            const lastChar = lText[line.length - 1];
            if (token === TOKEN_NAMES.action &&
                firstChar === "!" &&
                lText.substring(0, 3) !== "![[") {
                markDeco(lFrom, lFrom + 1, composeFClass(token));
            }
            if (token === TOKEN_NAMES.sceneHeading && firstChar === ".") {
                markDeco(lFrom, lFrom + 1, composeFClass(token));
            }
            if (token === TOKEN_NAMES.lyrics && firstChar === "~") {
                markDeco(lFrom, lFrom + 1, composeFClass(token));
            }
            if (token === TOKEN_NAMES.synopsis && firstChar === "=") {
                markDeco(lFrom, lFrom + 2, composeFClass(token));
            }
            if (token === TOKEN_NAMES.character) {
                if (firstChar === "@") {
                    markDeco(lFrom, lFrom + 1, composeFClass(token));
                }
                if (lastChar === ")") {
                    const charExt = lText.match(/(\(.*\))?$/g);
                    if (charExt === null) {
                        console.error("Character regex broken; char ext segment should exist");
                        continue;
                    }
                    const charExtLength = charExt[0].length;
                    const charExtStart = lTo - charExtLength;
                    markDeco(charExtStart, lTo, "cm-fountain-character-extension");
                }
            }
            if (token === TOKEN_NAMES.centered && lastChar === "<") {
                markDeco(lTo - 1, lTo, composeFClass(token));
            }
            pos = lTo + 1;
        }
    }
    return builder.finish();
}
function isFountainEnabled(view) {
    var _a, _b;
    const info = view.state.field(obsidian.editorInfoField);
    const { app, file } = info;
    if ((file === null || file === void 0 ? void 0 : file.extension) == "fountain")
        return true;
    if (file) {
        const fileCache = app.metadataCache.getFileCache(file);
        const cssClasses = (_b = (_a = fileCache === null || fileCache === void 0 ? void 0 : fileCache.frontmatter) === null || _a === void 0 ? void 0 : _a.cssclasses) !== null && _b !== void 0 ? _b : [];
        return cssClasses.includes("fountain");
    }
}

let FountainPlugin$1 = class FountainPlugin {
    constructor(view) {
        this.decorations = buildDecorations(view);
    }
    update(update) {
        if (update.docChanged || update.viewportChanged) {
            this.decorations = buildDecorations(update.view);
        }
    }
    destroy() { }
};
const pluginSpec = {
    decorations: (value) => value.decorations,
};
const fountainPlugin = view.ViewPlugin.fromClass(FountainPlugin$1, pluginSpec);

class FountainPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            this.registerEditorExtension(state.Prec.lowest(fountainPlugin));
        });
    }
    onunload() { }
}

module.exports = FountainPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Byb2xsdXArcGx1Z2luLXR5cGVzY3JpcHRAMTEuMS41X3JvbGx1cEA0LjAuMl90c2xpYkAyLjQuMF90eXBlc2NyaXB0QDQuNy40L25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9zcmMvZWRpdG9yL2NvbnN0cy50cyIsIi4uL3NyYy9lZGl0b3IvZGVjb3JhdGlvbnMudHMiLCIuLi9zcmMvZWRpdG9yL3BsdWdpbi50cyIsIi4uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpudWxsLCJuYW1lcyI6WyJuIiwidmlldyIsIlJhbmdlU2V0QnVpbGRlciIsIkRlY29yYXRpb24iLCJzdGF0ZSIsImVkaXRvckluZm9GaWVsZCIsIlZpZXdQbHVnaW4iLCJGb3VudGFpblBsdWdpbiIsIlBsdWdpbiIsIlByZWMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxREE7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJ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
